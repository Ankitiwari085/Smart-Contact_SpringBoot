<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{normal/N_base :: layout(~{::section})}">
<head>
  <meta charset="UTF-8">
  <title>Show Contacts</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        crossorigin="anonymous">
  <link th:href="@{/CSS/style.css}" rel="stylesheet" />
</head>
<body>
<section class="content-wrapper">
  <div class="content">
    <div class="card mr-3 ml-3">
      <div class="card-body">
        <h2 class="text-center"> Your Contacts</h2>
<!--        search Box-->
        <div class="search-container my-4">
          <input onkeyup="search()" id="search-input" type="text" class="form-control" placeholder="Search your contacts"/>
          <div class="search-result">
<!--              result-->

          </div>
        </div>
        <table class="table table-striped">
          <thead>
          <tr>
            <th scope="col">Id</th>
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col">Number</th>
            <th scope="col">Action</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="c : ${contacts}">
            <th scope="row" th:text="'SCM-2025' + ${c.cId}"></th>
            <td>
              <img class="my_profile_picture" th:src="@{'/Image/'+${c.imageUrl}}" alt="profileImage" />
              <span th:text="${c.name}+' ( '+${c.nickName}+' )'"></span>
            </td>
            <td >
              <a th:href="@{'/user/'+${c.cId}+'/contact'}"><span th:text=${c.email}></span></a>
            </td>
            <td th:text="${c.number}"></td>
            <td >
              <form th:action="@{'/user/update/' + ${c.cId}}" method="post" style="display:inline;">
                <button type="submit" class="btn btn-info">Edit</button>
              </form>
              <a href="#" th:onclick="|deleteContact(${c.cId})|" class="btn btn-warning">Delete</a>
            </td>
          </tr>
          </tbody>
        </table>
<!--        Pagination part...-->
        <nav aria-label="Page navigation example">
          <ul class="pagination">

            <li th:if="${currentPage != 0 }" class="page-item"><a class="page-link" th:href="@{'/user/show-contacts/'+${currentPage-1}}">Previous</a></li>

            <li th:classappend="${currentPage == i-1 ? 'active' :''}" th:each="i:${#numbers.sequence(1,totalPages)}" class="page-item"><a class="page-link" th:href="@{'/user/show-contacts/'+${i-1}}"><span th:text="${i}"></span></a></li>

            <li th:if="${currentPage+1 != totalPages}" class="page-item"><a class="page-link" th:href="@{'/user/show-contacts/'+${currentPage+1}}">Next</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</section>
<!-- jQuery & Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:src="@{/JS/script.js}"></script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
